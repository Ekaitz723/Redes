%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Cleese Assignment (For Students)
% LaTeX Template
% Version 2.0 (27/5/2018)
%
% This template originates from:
% http://www.LaTeXTemplates.com
%
% Author:
% Vel (vel@LaTeXTemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[11pt]{article}

\input{besteTex/structure} % Include the file specifying the document structure and custom commands

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{physics}
\setlength{\leftmargini}{0.4cm}
% \setlength{\rightmargini}{0.4cm}

%----------------------------------------------------------------------------------------
%	ASSIGNMENT INFORMATION
%----------------------------------------------------------------------------------------

% Required
\newcommand{\assignmentQuestionName}{Problema} % The word to be used as a prefix to question numbers; example alternatives: Problem, Exercise
\newcommand{\assignmentClass}{Redes de Ordenadores} % Course/class
\newcommand{\assignmentTitleId}{Entrega 2}
\newcommand{\assignmentTitle}{Servicio DNS} % Assignment title or name
\newcommand{\assignmentAuthorName}{Gerardo Escudero López\\Ekaitz Arriola Garcia} % Student name

% Optional (comment lines to remove)
\newcommand{\assignmentClassInstructor}{Rafael Socas Gutierrez} % Intructor name/time/description
\newcommand{\assignmentDueDate}{\today} % Due date

%----------------------------------------------------------------------------------------

\begin{document}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

%\maketitle % Print the title page
\subfile{besteTex/title.tex}

% \thispagestyle{empty} % Suppress headers and footers on the title page 
% (no porque detecta apartir del primero normal)

\newpage

% \begin{question}
%     \questionText{Instalar un servidor DNS en Linux}
%     \begin{subquestion}{
%         ¿Cómo funciona y cómo se instala?
%     }
%     \answer{SI}    
%     \end{subquestion}
%     \begin{subquestion}{Alcachofa?}
%         \answer{\markoztatu{Obvio}}
%     \end{subquestion}
% \end{question}

\begin{question}
    \questiontext{Instalar un servidor DNS en Linux}
    \begin{subquestion}{
        ¿Cómo funciona y cómo se instala?
    }
    \answer{
        Se instala mediante la orden \markoztatu{sudo apt install bind9}
    }

    \begin{tcblisting}{colback=black!5,colframe=black!50!black,title=Configuración del archivo de zona, listing only,hbox,enhanced,before=\begin{center},after=\end{center},listing options={numbers=left,numbersep=5pt,numberstyle=\tiny,numberfirstline = false,breaklines=true,language=C}}
    $TTL	604800
    @	IN	SOA	ns.madrid.org. admin.madrid.org. (
    			      2		; Serial
    			 604800		; Refresh
    			  86400		; Retry
    			2419200		; Expire
    			 604800 )	; Negative Cache TTL
    ;
    
    madrid.org.	120	IN	NS	ns.madrid.com.
    ns.madrid.org.	120	IN	A	192.168.1.51
    madrid.org.	120	IN	A	192.168.1.51
    www.madrid.org.	120	IN	A	192.168.1.51
    \end{tcblisting}    
    \answer{
        Se declara la zona en el fichero \markoztatu{named.conf.local}
    }
    \begin{tcblisting}{colback=black!5,colframe=black!50!black,title=Declaración de la zona y del archivo de zona, listing only,hbox,enhanced,before=\begin{center},after=\end{center},listing options={numbers=left,numbersep=5pt,numberstyle=\tiny,numberfirstline = false,breaklines=true,language=C}}
    zone "madrid.org" {
    	type master;	//para esclavo type slave;
    	file "/etc/bind/db.madrid.org";
    	//allow-trasnfer { x.x.x.x } ; //DNS Secundario
    	//also-notify {x.x.x.x}; //DNS SECUNDARIO
    	//lo de arriba lo cambiamos por master{IP DNS primario}
    };
    \end{tcblisting}
    \answer{
        Se reinicia el demonio con la orden \markoztatu{sudo service named restart}\\
        También servirá \markoztatu{sudo service bind9 restart} pero estariamos reiniciando el super demonio del DNS, que a su vez también reinicia el demonio named.
    }
    \end{subquestion}
\end{question}
%%%%%%%%%%%
%  PREGUNTA 2
%%%%%%%%%%
\begin{question}
    
    \questiontext{Instalar un servidor Web en Linux (Apache) y publicar una página web de prueba}
    \begin{subquestion}{
        ¿Cómo funciona y cómo se instala?
    }
    \answer{
        Se instala mediante la orden \markoztatu{sudo apt install apache2}\\
        Se configura el sitio web y página index en el directorio \markoztatu{/var/www/html}
    }
    \end{subquestion}
\end{question}

%%%%%%%%%%%
%  PREGUNTA 3
%%%%%%%%%%
\begin{question}
    \irudi{scale=0.80}{pato.png}{Conexión del cliente a un servidor web mediante la dirección: http://www.madrid.org\\Los cuadrados se agrandan si se les hace focus :D}
\end{question}
%%%%%%%%%%%
%  PREGUNTA 4
%%%%%%%%%%%
\newpage
\begin{question}
    %%SUBQUESTION A 
   \questiontext{ Uso de un sniffer como el Wireshark para:}
    \begin{subquestion}{
        Identificar los paquetes que intervienen en la resolución de nombres entre el cliente y el servidor DNS mediante un ejemplo. 
    }
    \answer{
        \PATO
    }
    \end{subquestion}
   %%SUBQUESTION B 
    \begin{subquestion}{
       ¿Qué protocolo se utiliza en esta resolución?  
    }
    \answer{
       Se utiliza el protocolo UDP 
    }
    \end{subquestion}
    
   %%SUBQUESTION C 
    \begin{subquestion}{
        ¿Qué tipo de registro es www?
    }
    \answer{
      Es un CNAME
      
    }
    \end{subquestion}
  %%SUBQUESTION D 
    \begin{subquestion}{
       Identificar los paquetes que intervienen en la conexión cliente-servidor web: 
    }
    \answer{
        \renewcommand{\theenumi}{\roman{enumi}}
        \begin{enumerate}
            \item \textbf{Three-way handshake} {\\\\
                \textbf{NO HAY} Three-way handshake ya que nuestra conexión es sobre UDP, aunque es cierto que se puede configurar para que sea sobre TCP. La razón tras hacerlo sobre UDP no es otra que hacerlo más rapido, precisamente al no realizar el Three-way handshake.\\
                Por otro lado, al definirle forwarders al DNS, Firefox sí que intenta hacer unos ajustes rápidos antes de encenderse, estos son, cargar los sitios más buscados como sugerencias y poner una imagen sobre ellos bajo la barra de búsqueda. Para esto necesita las IPs de estos sitios web por lo que la consulta deseada (en este caso "madrid.org"), no será la primera que aparecerá al filtrar con wireshark, sino que estará hundida entre muchas otras.\\
                Pero se puede solucionar filtrando por el dominio buscado.
                \irudisuelto{scale=0.46}{4_antesFiltro.png}{Peticiones DNS entre ambas maquinas antes de filtrar por query}
            }
            \item \textbf{Obtención de la página web} {
                \irudisuelto{width=14.6cm}{4_B_foto.png}{Filtrando por el dominio}
            }
            \item \textbf{Fin de conexión} {\\\\Sigue sin haber al ser conexión UDP.}
        \end{enumerate}
    }
    \end{subquestion}    
 
\end{question}
%%%%%%%%%%%
%  PREGUNTA 5
%%%%%%%%%%
\begin{question}
    
    \questiontext{Parte de investigación }
    \begin{subquestion}{
        Investigar y contar brevemente en qué consisten los principales ataques que puede sufrir un servidor DNS. Explicar uno de ellos y buscar un ejemplo real de ataque sufrido por un servidor DNS junto con sus consecuencias.
    }
    \answer{
        \begin{itemize}
            \item \textbf{Chache poisoning}  \\Consiste en modificar la cache dns (la local de la víctima o la del propio servidor DNS) para que redirija a la página que tu desees, principalmente para realizar phishing o procedimientos similares.
            \item \textbf{Ataques DNS basados en botnets (Flood)} \\Consiste en utilizar multitud de equipos zombis para saturar el DNS con multitud de peticiones sobre un dominio en concreto, por lo que cuando un usuario legítimo intente acceder el servicio será denegado.
            \item \textbf{Ataque de Dominio Fantasma} \\Este ataque no contiene fines maliciosos. Sirve para lograr mantener un dominio obliterado del DNS activo. Esto se consigue recargándolo continuadamente en la cache, prolongando así su TTL (time to live) indefinidamente, y por lo tanto suspendiéndolo en la cache hasta finalizar el ataque.
        \end{itemize}
   \textit{\textbf{ATAQUE MIRAI A DYN:}}\\
   Mirai es un reconocido troyano que se valió de numerosos dispositivos IoT infectados para formar una botnet, el cual usó con el fin de inutilizar los DNS de Dyn.\\
   En cuanto a la botnet, se apodero de aquella considerable cantidad de dispositivos \\fácilmente, ya que tenían las credenciales por defecto, o alternativamente carecían de una configuración lo suficientemente firme. Ejemplos bastante recurrentes lo son cámaras o reproductores DVD.
%   Mirai fue un troyano bastante famoso que a base de infectar dispositivos IoT creó una red botnet que utilizó para tumbar los DNS de Dyn. Los infectaba por tener las credenciales por defecto aun activas o por tener una configuración débil. Su principal víctima eran cámaras o reproductores DVD que utilizaba para lanzar ataques DDos 
    }
    \end{subquestion}
\end{question}

\iffalse
%\irudi{scale=0.6}{descarga.jpg}{ILSA PAto}
%\irudi{scale=0.6}{descarga.jpg}{}

\begin{question}
    \questionText{Patata}
    \begin{subquestion}{
    Pato?
    }
    \answer{SI}    
    \end{subquestion}
    \begin{subquestion}{Alcachofa?}
        \answer{\markoztatu{Obvio}}
    \end{subquestion}
\end{question}

\begin{question}
    \questiontext{Aceituna}
    \begin{mksubquestion}{Macarron}
        \palindice{section}{Macarron}
        \answer{\enmarcar{JAJAJA no}
        }
    \end{mksubquestion}
\end{question}












%----------------------------------------------------------------------------------------
%	Galdera (1)
%----------------------------------------------------------------------------------------

\begin{question}
    \questiontext{Sean 
        $B_{1} = \left\lbrace
        \begin{pmatrix}
        1 & 0 \\
        0 & 0 \\
        \end{pmatrix}
        \begin{pmatrix}
        0 & 1 \\
        1 & 0 \\
        \end{pmatrix}
        \begin{pmatrix}
        0 & 0 \\
        0 & 1 \\
        \end{pmatrix}\right\rbrace$
        base canónica del espacio de matrices de $S_{2}$ (matrices simétricas de orden 2) y  
        $B_{2} = \{(1,0,0);(0,1,0);(0,0,1)\}$
        base canónica de $\mathbb{R}^{3}$
        \\\\Si $f: S_{2} \rightarrow \mathbb{R}^{3}$ y $g: \mathbb{R}^{3} \rightarrow S_{2}$ son aplicaciones lineales de las que conocemos:
        \\\\ 1) Unas ecuaciones implícitas del núcleo de f en la base $B_{1}$ son $x-y+2z=0$
        \\ 2) $(gof)
        \begin{pmatrix}
        1 & 1 \\
        1 & 1 \\
        \end{pmatrix}
         = 
        \begin{pmatrix}
        -1 & 0 \\
        0 & 2 \\
        \end{pmatrix}
        $
        \newline
        \newline
        En todo el ejercicio se usaran vectores de $B_{2}$ para representar el espacio de matrices de$S_{2}$, ya que $S_{2}\cong\mathbb{R}^{3}$, esto es, $\begin{pmatrix}
        x & y \\
        y & z \\
        \end{pmatrix} \to \begin{pmatrix}
        x\\
        y\\
        z\\
        \end{pmatrix}$
    }
%----------------------------------------------------------------------------------------
%	Azpigardera (1:1)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Calcular la matriz del endomorfismo h=gof en la base $B_{1}$}
    \answer{
        $Ker_{f}\subseteq \ Ker_{h}$, ya que todo vector v tal que $fv=\begin{pmatrix}
        0\\
        0\\
        0\\
        \end{pmatrix}$, esto es, que pertenezca a $Ker_{f}$, tambien pertenecera al $Ker_{h}$, dado que $g\left[\begin{pmatrix}
        0\\
        0\\
        0\\
        \end{pmatrix}\right] = \begin{pmatrix}
        0\\
        0\\
        0\\
        \end{pmatrix}$ al ser una aplicación lineal.
        \newline
        La dimensión de $Ker_{f}$ es dos. Esto se consigue de las ecuaciones implicitas del nucleo. Solo hay una ecuación, asique no puede ser dependiente de otra más, por lo que solo tendrá una restricción, y por lo tanto, $3-1=2$ dimensiones.
        \newline
        \begin{equation*}
            Kerf=\{(x,y,z)/x-y+2z=0\} = \{(y-2z,y,z)/y,z\in\mathbb{R}\} = L<(1,1,0);(-2,0,1)>
        \end{equation*}
        \newline
        Por lo tanto, dim $Ker_{h} \geq$ dim $Ker_{f}=2$.
        \newline
        Por otra parte, la dimensión de $Im_{h}\geq$ 1, ya que sabemos que $\displaystyle\big(\begin{smallmatrix} -1 & 0\\ 0 & 2 \end{smallmatrix}\big)$ 
        es una imagen.
        \newline
        Entonces, sabiendo que $Ker_{h} + Im_{h}$ = 3 (dimensión del espacio $\mathbb{R}^{3}$), tenemos 
        \newline 
        que dim $Ker_{h} = 2$ y dim $Im_{h}= 1$.
        \begin{equation*}
            h\left[\displaystyle\begin{pmatrix}
                1\\
                1\\
                1\\
        \end{pmatrix}\right] = \begin{pmatrix}
                -1\\
                0\\
                2\\
        \end{pmatrix}; 
        h\left[\begin{pmatrix}
                1\\
                1\\
                0\\
        \end{pmatrix}\right] = \begin{pmatrix}
                0\\
                0\\
                0\\
        \end{pmatrix};
        h\left[\begin{pmatrix}
                -2\\
                0\\
                1\\
        \end{pmatrix}\right] = \begin{pmatrix}
                0\\
                0\\
                0\\
        \end{pmatrix}
        \end{equation*}
        Por lo tanto, la matriz asociada a h de $B_{n}=\{(1,1,1);(1,1,0);(-2,0,1)\}$ a $B_{1}$ :
        \begin{equation*}
            M_{B_{n}B_{1}}(h)\begin{pmatrix}
                -1  &   0   &   0\\
                0  &   0   &   0\\
                2  &   0   &   0\\
            \end{pmatrix}
        \end{equation*}
        \newpage
        Para conseguir $M_B_{c}(h)$, esto es, cambiar el espacio de partida, tendremos que multiplicarle por la derecha la matriz asociada al cambio de base de $B_{1}$ a $B_{n}$. Lo que tenemos son los vectores de $B_{n}$ en $B_{1}$, por lo que poniéndolos por columnas tendremos la matriz de cambio de base de $B_{n}$ a $B_{1}$. Esta matriz sería la matriz de cambio de base de $B_{n}$ a $B_{1}$, la inversa a la que queremos, por lo que:
        \begin{equation*}
            M_{B_{1}B_{n}}(h)={M_{B_{n}B_{1}}(h)}^{-1}=\begin{pmatrix}
                1  &   1   &   -2\\
                1  &   1   &   0\\
                1  &   0   &   1\\
            \end{pmatrix}^{-1} = \displaystyle\begin{pmatrix}
                \nicefrac{1}{2}  &   \nicefrac{-1}{2}   &   1\\
                \nicefrac{-1}{2}  &   \nicefrac{3}{2}   &   -1\\
                \nicefrac{-1}{2}  &   \nicefrac{1}{2}   &   0\\
            \end{pmatrix}
        \end{equation*}
        Y finalmente:
        \begin{equation*}
            \markoztatu{M_{B_{1}}(h)} = M_{B_{n}B_{1}}(h) * M_{B_{1}B_{n}} = \begin{pmatrix}
                -1  &   0   &   0\\
                0  &   0   &   0\\
                2  &   0   &   0\\
            \end{pmatrix}\displaystyle\begin{pmatrix}
                \nicefrac{1}{2}  &   \nicefrac{-1}{2}   &   1\\
                \nicefrac{-1}{2}  &   \nicefrac{3}{2}   &   -1\\
                \nicefrac{-1}{2}  &   \nicefrac{1}{2}   &   0\\
            \end{pmatrix} = 
            \markoztatu{
                \displaystyle\begin{pmatrix}
                    \nicefrac{-1}{2}  &   \nicefrac{1}{2}   &   -1\\
                    0  &   0   &   0\\
                    1  &   -1   &   2\\
                \end{pmatrix}
            }
        \end{equation*}
    }
    \end{subquestion}
%----------------------------------------------------------------------------------------
%	Azpigaldera (1:2)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Obtener una base de h(W) 
    \newline
    siendo $W=\left\lbrace\begin{pmatrix} x & y\\ y & z\end{pmatrix}\bigm\vert
        \begin{cases}
          x-2y+3z=0\\
          3x-7y+7z\\
          5x-11y+1 3z
        \end{cases}\right\rbrace \to \left\lbrace\begin{pmatrix} x\\ y\\ z\end{pmatrix}\bigm\vert
        \begin{cases}
          x-2y+3z=0\\
          3x-7y+7z\\
          5x-11y+1 3z
        \end{cases}\right\rbrace$
    }
    \answer{
        Primero comprobamos la independencia de las ecuaciones:
        \begin{equation*}
            \begin{cases}
              x-2y+3z=0\\
              3x-7y+7z\\
              5x-11y+1 3z
            \end{cases} 
            \Rightarrow
            \Bigg(
                \begin{array}{ccc|c}
                    1 & -2 & 3 & 0 \\
                    3 & -7 & 7 & 0 \\
                    5 & -11 & 13 & 0 \\
                \end{array}
            \Bigg)
            \xrightarrow{f_{2}-3f{1}}
            \Bigg(
                \begin{array}{ccc|c}
                    1 & -2 & 3 & 0 \\
                    0 & -1 & -2 & 0 \\
                    5 & -11 & 13 & 0 \\
                \end{array}
            \Bigg)
        \end{equation*}
        \begin{equation*}
            \Bigg(
                \begin{array}{ccc|c}
                    1 & -2 & 3 & 0 \\
                    0 & -1 & -2 & 0 \\
                    5 & -11 & 13 & 0 \\
                \end{array}
            \Bigg)
            \xrightarrow{f_{3}-5f{1}}
            \Bigg(
                \begin{array}{ccc|c}
                    1 & -2 & 3 & 0 \\
                    0 & -1 & -2 & 0 \\
                    0 & -1 & -2 & 0 \\
                \end{array}
            \Bigg)
            \xrightarrow{f_{3}-f{2}}
            \Bigg(
                \begin{array}{ccc|c}
                    1 & -2 & 3 & 0 \\
                    0 & -1 & -2 & 0 \\
                    0 & 0 & 0 & 0 \\
                \end{array}
            \Bigg)
        \end{equation*}
        Solo hay dos restricciones, por lo que una base de W tendrá 1 dimensión, esto es, estará formada por un solo vector. Este vector lo sacamos con las dos ecuaciones que nos quedo de simplificarlos.
        \begin{equation*}
            \begin{cases}
                x=2y-3z\\
                x=\nicefrac{7y-7z}{3}
            \end{cases}
            \Rightarrow
            6y-9z=7y-7z
            \Rightarrow
            \begin{cases}
                x=2y-3z=-4z-3z=-7z\\
                y=-2z\\
                z\in\mathbb{R}
            \end{cases}
        \end{equation*}
        Para sacar un vector elegimos z=-1, quedándonos $W_{1}$ =
        \begin{pmatrix}
            7\\
            2\\
            -1
        \end{pmatrix}.
        \newline
        Una base de h(W) esta formada por las imágenes linealmente independientes de los vectores que forman la base de W, en este caso L<
        \begin{pmatrix}
            7\\
            2\\
            -1
        \end{pmatrix}>.
        \newpage
        \begin{equation*}
            h(W_{1}) = \displaystyle\begin{pmatrix}
                \nicefrac{-1}{2}  &   \nicefrac{1}{2}   &   -1\\
                0  &   0   &   0\\
                1  &   -1   &   2\\
            \end{pmatrix} * \begin{pmatrix}
            7\\
            2\\
            -1
        \end{pmatrix} = \begin{pmatrix}
            \nicefrac{-3}{2}\\
            0\\
            3
        \end{pmatrix}
        \end{equation*}
        Entonces h(W) es el subespacio generado por este vector.
        \begin{align*}
            \markoztatu{h(W)}=\left\lbrace\begin{pmatrix} \nicefrac{-3a}{2}\\ 0\\ 3a\end{pmatrix}\bigm\vert
        a\in\mathbb{R}
        \right\rbrace=
        \markoztatu{\left\lbrace\begin{pmatrix} x\\ y\\ z\end{pmatrix}\bigm\vert
        \begin{cases}
          2x+z=0\\
          y=0
        \end{cases}\right\rbrace}=\markoztatu{\left\lbrace\begin{pmatrix} x\\ y\\ -2x\end{pmatrix}\bigm\vert
        x,y\in\mathbb{R}\right\rbrace}
        \end{align*}
    }
    \end{subquestion}
%----------------------------------------------------------------------------------------
%	Azpigaldera (1:3)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Encontrar unas ecuaciones paramétricas en $B_{1}$ de h^{-1}(L<\big(\begin{smallmatrix} 1 & 1\\ 1& 1 \end{smallmatrix}\big)>) \to h^{-1}(L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>)
    }
    \answer{
        Para que $h^{-1}(L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>)$ exista, todos los vectores de la forma $(\alpha,\alpha,\alpha), \alpha\in\mathbb{R}$ deben de tener contra-imagen, Si uno no lo tiene, es suficiente para argumentar que $h^{-1}(L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>)$ no será un subespacio vectorial, por lo que no existirá la contra-imagen.
        \newline
        \newline
        Los vectores imagen de h son de la forma $(-\alpha,0,2\alpha), \alpha\in\mathbb{R}$. 
        \newline
        De los vectores pertenecientes a $L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>$ (de la forma $(\alpha,\alpha,\alpha),\alpha\in\mathbb{R}$ ) solo podrá ser imagen $\big(\begin{smallmatrix} 0 \\ 0\\ 0 \end{smallmatrix}\big)$, esto es, el vector nulo. Es decir, \markoztatu{$L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>$ no tiene contra-imagen}, ya que los vectores (en este caso, el vector) que forman una base de $L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>$ no tienen contra-imagen.
        \newline
        \newline
        Para terminar de verlo, lo calculamos para un vector perteneciente a $L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>$
        \newline
        Dado que $h\left[\alpha\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)\right] = \alpha h\left[\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)\right]$, ya que es una aplicación lineal, bastara con comprobar para el vector $\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)$, esto es, el vector que forma una base de $L<\big(\begin{smallmatrix} 1 \\ 1\\ 1 \end{smallmatrix}\big)>$.
        \begin{equation*}
            h\left[\begin{pmatrix} x \\ y\\ z \end{pmatrix}\right] = 
            \displaystyle\begin{pmatrix}
                \nicefrac{-1}{2}  &   \nicefrac{1}{2}   &   -1\\
                0  &   0   &   0\\
                1  &   -1   &   2\\
            \end{pmatrix} * 
            \begin{pmatrix} x \\ y\\ z \end{pmatrix} = 
            \begin{pmatrix}
                \nicefrac{x}{2}+\nicefrac{y}{2}-z\\
                0\\
                x-y+2z 
            \end{pmatrix} = 
            \begin{pmatrix} 1 \\ 1\\ 1 \end{pmatrix}
        \end{equation*}
        Esto es completamente imposible, ya que $0\neq1$ y $0\neq-2$, por lo que se confirma el resultado.
    }
    \end{subquestion}
%----------------------------------------------------------------------------------------
%	Azpigaldera (1:4)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{¿Pueden ser las ecuaciones 
    \begin{cases}
        x+2y+3z=0\\
        y-4z=0
    \end{cases} 
    unas ecuaciones implícitas en $B_{1}$ del subespacio $Im_{g}$? Razona la respuesta
    }
    \answer{
        Llamemos U al subespacio definido por las ecuaciones implícitas que se nos da.
        \begin{equation*}
            U=\left\lbrace\begin{pmatrix} x \\ y\\ z \end{pmatrix}\bigm\vert
            \begin{cases}
                x+2y+3z=0\\
                y-4z=0
            \end{cases} 
            \right\rbrace
        \end{equation*}
        Las ecuaciones son independientes (rango = cantidad de ecuaciones). Ya sabemos que la base de U esta formada por un único vector, ya que dimensión de $\mathbb{R}^{3}$ = dim $Im_{g}$ + dim $Ker_{g}$, por lo que $3-2=1$.
        \newline
        \newline
        La dimensión de la base del subespacio $Im_{g}$ no podrá ser mayor que 3, ya que esa es la dimensión completa del espacio $\mathbb{R}^{3}$. También sabemos que $Im_{h}$ $\subseteq$ $Im_{g}$, ya que $h=g[f[v]]$, siendo $v\in\mathbb{R}^{3}$, pero es posible que exista un vector v tal que f[v]=$\big(\begin{smallmatrix} 0 \\ 0\\ 0 \end{smallmatrix}\big)$, y por lo tanto 
        $h[v]=g[f[v]]=g[\big(\begin{smallmatrix} 0 \\ 0\\ 0 \end{smallmatrix}\big)]=\big(\begin{smallmatrix} 0 \\ 0\\ 0 \end{smallmatrix}\big)$, pero que a su vez $g[v]\neq\big(\begin{smallmatrix} 0 \\ 0\\ 0 \end{smallmatrix}\big)$.
        \newline
        Por lo tanto, $\big(\begin{smallmatrix} -1 \\ 0\\ 2 \end{smallmatrix}\big)$, el cual pertenece a $Im_{h}$, también pertenece a $Im_{g}$, pero una base de $Im_{g}$ puede tener más vectores, ya que $1\geq Im_{g}\geq 3$.
        \newline
        \newline
        Para que las ecuaciones implícitas que se nos da en el enunciado sean unas ecuaciones implícitas del subespacio $Im_{g}$, la dimensión de $Im_{g}$ deberá ser 1, por lo que el vector en base $B_{1}$ de cualquier base de U deberá ser linealmente dependiente de $\big(\begin{smallmatrix} -1 \\ 0\\ 2 \end{smallmatrix}\big)$, ya que nos dan en el enunciado que $\big(\begin{smallmatrix} -1 \\ 0\\ 2 \end{smallmatrix}\big)$ pertenece a la imagen de g, por lo que si dim $Im_{g}=1$, ese vector deberá formar la base de $Im_{g}$, o ser combinación lineal de los vectores (en este caso, el vector) que forman la base de $Im_{g}$.
        \begin{equation*}
            U=\left\lbrace\begin{pmatrix} x \\ y\\ z \end{pmatrix}\bigm\vert
            \begin{cases}
                x+2y+3z=0\\
                y-4z=0
            \end{cases} 
            \right\rbrace
            \Rightarrow 
            \begin{cases}
                x=11z\\
                y=4z\\
                z\in\mathbb{R}
            \end{cases}
            \Rightarrow
            \left\lbrace\begin{pmatrix} -11z \\ 4z\\ z \end{pmatrix}\bigm\vert z\in\mathbb{R}\right\rbrace
        \end{equation*}
        $U=L<\big(\begin{smallmatrix} -11 \\ 4\\ 1 \end{smallmatrix}\big)>$, esto es, una base de U sería $\big(\begin{smallmatrix} -11 \\ 4\\ 1 \end{smallmatrix}\big)$, el cual es linealmente independiente respecto a $\big(\begin{smallmatrix} -1 \\ 0\\ 2 \end{smallmatrix}\big)$. Al ser solo 2 vectores, bastaría ver si uno es de la forma de $\alpha$v, siendo v el otro vector. Al ser linealmente independientes, significa que ambos vectores no pueden pertenecer a $Im_{g}$, por lo que se comprueba que las ecuaciones implícitas que se nos da 
        \newline
        \markoztatu{no pueden ser unas ecuaciones implícitas en $B_{1}$ del subespacio $Im_{g}$.}
    }
    \end{subquestion}
\end{question}
%----------------------------------------------------------------------------------------
%	Galdera 2
%----------------------------------------------------------------------------------------
\begin{question}
    \questiontext{
        Para cada $a\in\mathbb{R}$ se define la aplicación lineal $f_{\alpha}: \mathbb{R}^{3} \to \mathbb{R}^{3}$ cuya matriz respecto de la base canónica es
        \begin{equation*}
            M_{\alpha}f=
            \begin{pmatrix}
                1   &   \alpha  &   0\\
                \alpha  &   1   &   \alpha\\
                0   &   \alpha  &   1
            \end{pmatrix}
        \end{equation*}
    }
%----------------------------------------------------------------------------------------
%	Azpigaldera (2:1)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Hallar el núcleo de $f_{\alpha}$ según los valores de $\alpha$}
        \answer{
        \markoztatu{$\alpha=0$}
        \newline
        \newline
        Cuando $\alpha=0$, $M_{\alpha}f=I_{3}$, por lo que obviamente \markoztatu{$Ker_{f_{\alpha}}=\{\varnothing\}$}, ya que es un automorfismo.
        \newline
        \newline
        \markoztatu{$\alpha\neq0$}
        \newline
        \newline
        Cuando $\alpha\neq0$, $M_{\alpha}f$ será una matriz de Toeplitz tridiagonal de dimensión 3, esto es:
        \begin{equation*}
            M_{\alpha}f=T_{3}=
            \begin{pmatrix}
                a_{0}   &   a_{-1}  &   0\\
                a_{1}   &   a_{0}   &   a_{-1}\\
                0   &   a_{1}   &   a_{0}
            \end{pmatrix}
        \end{equation*}
        En el cual $a_{1}=a_{-1}=\alpha$ y $a_{0}=1$. Este tipo de matriz, si se cumple que $a_{1}$, $a_{-1} \neq 0$, siempre sera semejante a una matriz diagonal, y sus autovalores son los siguientes:
        \begin{equation*}
            \lambda_{k}=a_{0} + 2\sqrt{a_{1}a_{-1}}\cos{\nicefrac{k\pi}{n+1}},\ (1\leq k \leq n), n=3 (dimensiones)
        \end{equation*}
        Que en este caso, $a_{1}=a_{-1}=\alpha$ y $a_{0}=1$, se quedaría de esta forma:
        \begin{equation*}
            \lambda_{k}=1+2\abs{\alpha}\cos{\nicefrac{k\pi}{4}}, \ (1\leq k \leq n)
            \Rightarrow
            \begin{cases}
                \lambda_{0} = 1+\sqrt{2\alpha^{2}}\\
                \lambda_{1} = 1\\
                \lambda_{2} = 1-\sqrt{2\alpha^{2}}
            \end{cases}
        \end{equation*}
        Entre matrices semejantes se conserva el rango, la traza y el determinante, por lo que:
        \begin{align*}
            \abs{M_{\alpha}f}=(1+\sqrt{2\alpha^{2}})(1-\sqrt{2\alpha^{2}})=1-\abs{2\alpha^{2}}
        \end{align*}
        2 siempre será positivo y $\alpha^{2}$ también, por lo que $\abs{2\alpha^{2}}=2\alpha^{2}$, y por lo tanto:
        \begin{align*}
            \abs{M_{\alpha}f}=1-2\alpha^{2} \rightarrow \abs{M_{\alpha}f}=0 \text{\ cuando \ } \alpha = \pm\nicefrac{\sqrt{2}}{2}
        \end{align*}
        Por lo tanto, $M_{\alpha}f$ será semejante a una matriz diagonal donde el 0 \contour{black}{no} es autovalor cuando \markoztatu{$\alpha \neq \pm\nicefrac{\sqrt{2}}{2}$}, y por lo tanto, \markoztatu{$Ker_{f_{\alpha}}=\{\varnothing\}$}.
        \newline
        Cuando \markoztatu{$\alpha = \pm\nicefrac{\sqrt{2}}{2}$}, $M_{\alpha}f$ será semejante a una matriz diagonal donde el 0 \contour{black}{si} es autovalor, por lo que $Ker_{f_{\alpha}}=\{\varnothing\}$. En ambos casos ($\nicefrac{\sqrt{2}}{2}$ y $-\nicefrac{\sqrt{2}}{2}$) $M_{\alpha}f$ será semejante a la siguiente matriz: (con los autovectores 0 y 2 intercambiados)
        \begin{equation*}
            \begin{pmatrix}
                2   &   0   &   0\\
                0   &   1   &   0\\
                0   &   0   &   0
            \end{pmatrix}
        \end{equation*}
        Esto es, el rango sera 2 para ambos casos, que sera el mismo rango para $M_{\alpha}f$, por lo que dim$Ker_{M_{\alpha}f}$=1.
        \newpage
        Sustituyendo en $M_{\alpha}f$:
        \begin{equation*}
            M_{\pm\nicefrac{\sqrt{2}}{2}}f=
            \begin{pmatrix}
                1   &   \pm\nicefrac{\sqrt{2}}{2}  &   0\\
                \pm\nicefrac{\sqrt{2}}{2}  &   1   &   \pm\nicefrac{\sqrt{2}}{2}\\
                0   &   \pm\nicefrac{\sqrt{2}}{2}  &   1
            \end{pmatrix}
            \Rightarrow
            \begin{cases}
                t=\mp\sqrt{2}x\\
                x=z
            \end{cases}
            \markoztatu{\alpha=\pm\nicefrac{\sqrt{2}}{2}}
        \end{equation*}
        Importante diferenciar entre $\pm$ y $\mp$. Si se sustituye $\alpha=-\nicefrac{\sqrt{2}}{2}$, el segundo elemento del vector definido en el $Ker_{M_{\alpha}f}$ de abajo sera positivo ($+\sqrt{2}x$), y viceversa.
        \begin{equation*}
            \markoztatu{Ker_{M_{\alpha}f}=\left\lbrace\begin{pmatrix} x\\ \mp\sqrt{2}x\\x\end{pmatrix}\bigm\vert x\in\mathbb{R}\right\rbrace}
        \end{equation*}
        }
    \end{subquestion}
%----------------------------------------------------------------------------------------
%	Azpigaldera (2:2)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Clasificar, según los valores de $\alpha$, el endomorfismo}
        \answer{
        El endomorfismo puede ser, o bien, inyectivo y sobreyectivo, esto es, biyectivo, siendo un automorfismo; o bien ni inyectivo ni sobreyectivo.
        \newline
        \newline
        Del ejercicio anterior tenemos que cuando $\alpha\neq\pm\nicefrac{\sqrt{2}}{2}$, $M_{\alpha}f$ va a ser semejante a una matriz diagonal donde el 0 no es autovalor, y estas a su vez son automorfismos, por lo que $M_{\alpha}f$ también.
        \newline
        En cambio, cuando $\alpha=\pm\nicefrac{\sqrt{2}}{2}$, $M_{\alpha}f$ el endomorfismo no será ni inyectivo ni sobreyectivo.
        }
    \end{subquestion}
%----------------------------------------------------------------------------------------
%	Azpigaldera (2:3)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Analizar si $S=\{x\in\mathbb{R}^{3}\bigm\vert f_{0}(x)=x\}$ es o no un subespacio de $x\in\mathbb{R}^{3}$. En caso afirmativo, obtener una base de S.
        }
        \answer{
        Cuando $\alpha=0$, la matriz asociada a $f_{0}\ =\ I_{3}$, esto es, la matriz identidad de 3x3, por lo que obviamente $S\subseteq\mathbb{R}^{3}$. Es más, $S\cong\mathbb{R}^{3}$, ya que S ocupa todo $\mathbb{R}^{3}$.
        Una base de S será la base canónica de $\mathbb{R}^{3} = \{(1,0,0);(0,1,0);(0,0,1)\}$.
        }    
    \end{subquestion}
%----------------------------------------------------------------------------------------
%	Azpigaldera (2:4)
%----------------------------------------------------------------------------------------
    \begin{subquestion}{Dada $B^{'}=\{\Vec{e_{1}}-\Vec{e_{2}};\Vec{e_{2}}-\Vec{e_{3}};\Vec{e_{3}}$\} calcular la matriz de $f_{\alpha}$ en la base $B^{'}$. Efectuar cálculos directamente por coordenadas y de modo matricial}
        \answer{
            \markoztatu{Modo matricial}
            \newline
            \newline
            $M_{\alpha}f$ (o $M_{B_{c}}f{\alpha}$)
            es la matriz asociada a $f_{\alpha}$ en la base canónica de $\mathbb{R}^{3}$ tanto en el espacio de salida como en el de entrada.
            \newline
            \newline
            Para conseguir la matriz asociada a $f_{\alpha}$ en la base $B^{'}$ tanto en el espacio de salida como en el de entrada, tenemos que encontrar su matriz semejante en esa base.
            \newpage
            \begin{equation*}
                M_{B^{'}}f_{\alpha}=P^{-1} * M_{B_{c}}f{\alpha} * P
            \end{equation*}
            \begin{align*}
                \centering
                \xymatrix@L=6pt@C=4.5em@R=4.5em{\ar @{} [dr] |{}B^{'} \ar[d]|-{P={M_{B^{'}B_{c}}}} \ar[r]^{M_{B^{'}}f_{\alpha}} & A^{'} \\B_{c} \ar[r]_{M_{B_{c}}f_{\alpha}}        & A_{c} \ar[u]|-{P^{-1}={M_{B_{c}B^{'}}}}       }
            \end{align*}
            P sera la matriz de cambio de base de la base $B^{'}$ a la base $B_{c}$, esto es, la base que se nos dio por columnas, ya que cada vector de $B^{'}$ esta expresado como combinación lineal de los vectores de la base canónica.
            \newline
            \begin{align*}
                M_{B^{'}B_{c}}=
                \begin{pmatrix}
                    1   &   0 &    0\\
                    -1  &   1   &   0\\
                    0   &   -1  &   1
                \end{pmatrix}=
                P
            \end{align*}
            $M_{B_{c}B^{'}}$, por lo tanto, será la inversa: $P^{-1}$
            \begin{align*}
                M_{B_{c}B^{'}}=
                \begin{pmatrix}
                    1   &   0 &    0\\
                    1  &   1   &   0\\
                    1   &   1  &   1
                \end{pmatrix}=
                P^{-1}
            \end{align*}
            \begin{equation*}
                \markoztatu{M_{B^{'}}f_{\alpha}}=
                \begin{pmatrix}
                    1   &   0 &    0\\
                    1  &   1   &   0\\
                    1   &   1  &   1
                \end{pmatrix} 
                \begin{pmatrix}
                    1   &   \alpha  &   0\\
                    \alpha  &   1   &   \alpha\\
                    0   &   \alpha  &   1
                 \end{pmatrix}
                \begin{pmatrix}
                    1   &   0 &    0\\
                    -1  &   1   &   0\\
                    0   &   -1  &   1
                \end{pmatrix}=
                \markoztatu{
                    \begin{pmatrix}
                        1-\alpha   &   \alpha &    0\\
                        0  &   1   &   \alpha\\
                        -\alpha   &   \alpha  &   1+\alpha
                    \end{pmatrix}}
            \end{equation*}
        }
        \answer{
            \markoztatu{Directamente por coordenadas}
            \newline
            \newline
            Para cambiar el espacio de partida de $B_{c}$ en $B^{'}$, obtenemos las imágenes de los vectores de $B^{'}$.
            \begin{align*}
                f_{\alpha}(1,-1,0) = 
                \begin{pmatrix}
                    1   &   \alpha  &   0\\
                    \alpha  &   1   &   \alpha\\
                    0   &   \alpha  &   1
                \end{pmatrix} 
                \begin{pmatrix}
                    1\\
                    -1\\
                    0
                \end{pmatrix}=
                \begin{pmatrix}
                    -a+1 \\
                    a-1 \\
                    -a
                \end{pmatrix}
            \end{align*}
            \begin{align*}
                f_{\alpha}(0,1,-1) = 
                \begin{pmatrix}
                    1   &   \alpha  &   0\\
                    \alpha  &   1   &   \alpha\\
                    0   &   \alpha  &   1
                \end{pmatrix} 
                \begin{pmatrix}
                    0\\
                    1\\
                    -1
                \end{pmatrix}=
                    \begin{pmatrix}
                        a \\
                        -a+1 \\
                        a-1
                    \end{pmatrix}
            \end{align*}
            \begin{align*}
                f_{\alpha}(0,0,1) = 
                \begin{pmatrix}
                    1   &   \alpha  &   0\\
                    \alpha  &   1   &   \alpha\\
                    0   &   \alpha  &   1
                \end{pmatrix} 
                \begin{pmatrix}
                    0\\
                    0\\
                    1
                \end{pmatrix}=
                \begin{pmatrix}
                    0 \\
                    a \\
                    1
                \end{pmatrix}
            \end{align*}
            Estos vectores puestos por columnas forman la matriz asociada a $M_{B^{'}{B_{c}}}f{\alpha}$.
            \newline
            Para cambiar también el espacio de llegada de $B_{c}$ en $B^{'}$, obtendremos las coordenadas de las imágenes en base $B^{'}$.
            \begin{align*}
                \begin{cases}
                    f(1,-1,0)=(-\alpha+1,\alpha-1,-\alpha)=(1,-1,0)+b(0,1,-1)+c(0,0,1)\\
                    f(0,1,-1)=(\alpha,-\alpha+1,\alpha-1)=a(1,-1,0)+b(0,1,-1)+c(0,0,1)\\
                    f(0,0,1)=(0,\alpha,1)=a(1,-1,0)+b(0,1,-1)+c(0,0,1)
                \end{cases}
            \end{align*}
            \begin{align*}
                \begin{cases}
                    \begin{cases}
                        -\alpha+1=a\\
                        \alpha-1=b-a\\
                        -\alpha=c-b
                    \end{cases}
                    \Rightarrow
                    \begin{cases}
                        a=-\alpha+1\\
                        b=0\\
                        c=-\alpha
                    \end{cases}\\
                    \begin{cases}
                        \alpha=a\\
                        -\alpha+1=b-a\\
                        \alpha-1=c-b
                    \end{cases}
                    \Rightarrow
                    \begin{cases}
                        a=\alpha\\
                        b=1\\
                        c=\alpha
                    \end{cases}\\
                    \begin{cases}
                        0=a\\
                        \alpha=b-a\\
                        1=c-b
                    \end{cases}
                    \Rightarrow
                    \begin{cases}
                        a=0\\
                        b=\alpha\\
                        c=1+\alpha
                    \end{cases}
                \end{cases}
            \end{align*}
            Los coeficientes de la combinación lineal son las imágenes en la base $B^{'}$.
            \newline
            La matriz que forman es la matriz asociada a $M_{B^{'}}f{\alpha}$, ya que son las imágenes de vectores de $B^{'}$, en la base $B^{'}$.
            \begin{equation*}
                \markoztatu{M_{B^{'}}f{\alpha}} = 
                \markoztatu{
                    \begin{pmatrix}
                        1-\alpha   &   \alpha &    0\\
                        0  &   1   &   \alpha\\
                        -\alpha   &   \alpha  &   1+\alpha
                    \end{pmatrix}}
            \end{equation*}
            
            % Obtenemos las coordenadas de los vectores de $B_{c}$ en $B^{'}$: los coeficientes de la combinación lineal:
            % \begin{align*}
            %     \begin{cases}
            %     \Vec{e_{1}} = a(1,-1,0)+b(0,1,-1)+c(0,0,1)
            %     \Vec{e_{2}} = a(1,-1,0)+b(0,1,-1)+c(0,0,1)
            %     \Vec{e_{3}} = a(1,-1,0)+b(0,1,-1)+c(0,0,1)
            % \end{cases} = 
            % \begin{cases}
            %     \begin{cases}
            %         1=a
            %         =-a+b
            %         =c-b
            %     \end{cases}
            %     \begin{cases}
            %         =a
            %         =-a+b
            %         =c-b
            %     \end{cases}
            %     \begin{cases}
            %         =a
            %         =-a+b
            %         =c-b
            %     \end{cases}
            % \end{cases}
            % \end{align*}
            
            
            
            % Calculamos los vectores $B^{'}$ para cambiar la base en el espacio de partida.
            % \newline
            % Como es la base canonica, 
            % \begin{align*}
            %     f_{\alpha}(1,-1,0) = 
            %     \begin{pmatrix}
            %         1   &   \alpha  &   0\\
            %         \alpha  &   1   &   \alpha\\
            %         0   &   \alpha  &   1
            %     \end{pmatrix} 
            %     \begin{pmatrix}
            %         1\\
            %         -1\\
            %         0
            %     \end{pmatrix}=
            %     \begin{pmatrix}
            %         -a+1 \\
            %         a-1 \\
            %         -a
            %     \end{pmatrix}
            % \end{align*}
            % \begin{align*}
            %     f_{\alpha}(0,1,-1) = 
            %     \begin{pmatrix}
            %         1   &   \alpha  &   0\\
            %         \alpha  &   1   &   \alpha\\
            %         0   &   \alpha  &   1
            %     \end{pmatrix} 
            %     \begin{pmatrix}
            %         0\\
            %         1\\
            %         -1
            %     \end{pmatrix}=
            %         \begin{pmatrix}
            %             a \\
            %             -a+1 \\
            %             a-1
            %         \end{pmatrix}
            % \end{align*}
            % \begin{align*}
            %     f_{\alpha}(0,0,1) = 
            %     \begin{pmatrix}
            %         1   &   \alpha  &   0\\
            %         \alpha  &   1   &   \alpha\\
            %         0   &   \alpha  &   1
            %     \end{pmatrix} 
            %     \begin{pmatrix}
            %         0\\
            %         0\\
            %         1
            %     \end{pmatrix}=
            %     \begin{pmatrix}
            %         0 \\
            %         a \\
            %         1
            %     \end{pmatrix}
            % \end{align*}
            % Calculamos las imágenes de los vectores de la base $B^{'}$
            % \begin{align*}
            %     f_{\alpha}(1,-1,0) = 
            %     \begin{pmatrix}
            %         1   &   \alpha  &   0\\
            %         \alpha  &   1   &   \alpha\\
            %         0   &   \alpha  &   1
            %     \end{pmatrix} 
            %     \begin{pmatrix}
            %         1\\
            %         -1\\
            %         0
            %     \end{pmatrix}=
            %     \begin{pmatrix}
            %         -a+1 \\
            %         a-1 \\
            %         -a
            %     \end{pmatrix}
            % \end{align*}
        }
    \end{subquestion}
\end{question}
\fi
%----------------------------------------------------------------------------------------
%	QUESTION 
%----------------------------------------------------------------------------------------


%----------------------------------------------------------------------------------------

\end{document}
